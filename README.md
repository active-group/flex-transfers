# Flex Erlbank Transfer Service

Service to transfer money between account within the Erlbank.

## Events interface

On the Erlang node this service runs on, there is a `gen_server`
process in the local registry called `transfer_feed`. This serves
events in the following format:

```
{event, Index, Type, Content}
```

- `Index` is a non-negative integer, by which events are ordered in time
- `Type` is actually only `transfer_event`
- `Content` depends on `Type`

For `Type` `transfer_event` the `Content` is a tuple

```
{TransferId, Timestamp, FromAccountNumber, ToAccountNumber, Amount}
```

Where:

- `TransferId` is a unique integer
- `Timestamp` is an `erlang:timestamp`
- `FromAccountNumber` and `ToAccountNumber` are unique integers generated by the account service
- `Amount` is a number denoting the transferred amount in Euro.

These events are served from the `transfer_feed` process via a call like so:

```
gen_server:call(transfer_feed, {events, From})
```

This returns a list of all available event tuples starting with the `From` index, in ascending order.
(Or the least index higher than `From` - specifying 0 here fetches *all* events.)

## Build

```
$ rebar3 compile
```

## Run locally using rebar shell

The service can be run locally including a REPL using

```
$ rebar3 shell
```

The web-frontend is served at http://localhost:8001/
